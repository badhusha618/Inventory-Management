<!DOCTYPE html>
<!--/*
  ~
  ~    Copyright (c) 2017 Makinus Pvt Ltd - All Rights Reserved
  ~
  ~    Unauthorized copying of this file, via any medium is strictly prohibited
  ~    Proprietary and confidential
  ~    Written by Makinus Pvt Ltd
  ~
  */-->
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{dashboard/dashboard-layout}">
<head>
    <title>Slider Images</title>

    <!--/* Bootstrap core CSS  */-->
    <link href="http://cdn.jsdelivr.net/webjars/bootstrap/3.3.7/css/bootstrap.min.css"
          th:href="@{/webjars/bootstrap/3.3.7/css/bootstrap.min.css}" rel="stylesheet" media="screen" />

    <link href="/resources/css/bootstrapValidator.min.css" th:href="@{/resources/css/bootstrapValidator.min.css}" rel="stylesheet" media="screen" />
    <link href="/resources/css/animate.min.css" th:href="@{/resources/css/animate.min.css}" rel="stylesheet" media="screen" />

    <!--/*  SweetAlert2 CSS   */-->
    <link href="/resources/css/sweetalert2.min.css" th:href="@{/resources/css/sweetalert2.min.css}" rel="stylesheet" media="screen" />
    <!--/*  Bootstrap Lightbox CSS   */-->
    <link href="/resources/css/ekko-lightbox.css" th:href="@{/resources/css/ekko-lightbox.css}" rel="stylesheet" media="screen" />

    <!--/*  Paper Dashboard CSS   */-->
    <link href="/resources/css/paper-dashboard.css" th:href="@{/resources/css/paper-dashboard.css}" rel="stylesheet" media="screen" />

    <!--/*     Fonts and icons    */-->
    <link href="http://cdn.jsdelivr.net/webjars/font-awesome/4.7.0/css/font-awesome.css"
          th:href="@{/webjars/font-awesome/4.7.0/css/font-awesome.css}" rel="stylesheet" media="screen" />
    <link href='https://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css' >
    <link href="/resources/css/themify-icons.css" th:href="@{/resources/css/themify-icons.css}" rel="stylesheet" media="screen" />
</head>

<body>

<th:block layout:fragment="header">
    <div th:replace="~{dashboard/header :: sidemenu(_,_,_,_,_,'active',_)}"></div>
</th:block>

<th:block layout:fragment="topnavigation">
    <div th:replace="~{dashboard/navigation :: nav('Slider Images',_,_)}"></div>
</th:block>

<th:block layout:fragment="modals">
</th:block>

<div class="content" layout:fragment="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">Slider Images(<span th:text="${#lists.size(sliderImageList)}"></span>)</h4>
                        <p class="category">List of home page slider images</p>
                    </div>
                    <div class="card-content table-responsive table-full-width">
                        <table class="table table-striped">
                            <thead>
                            <th>Name</th>
                            <th>Description</th>
                            </thead>
                            <tbody>
                            <tr th:if="${#lists.isEmpty(sliderImageList)}">
                                <td colspan="2" class="text-center">
                                    <span class="text-danger">No Home Slider Images Found</span>
                                </td>
                            </tr>
                            <tr th:each="slider : ${sliderImageList}">
                                <td>
                                    <span th:text="${slider.sliderName}">Slider Name</span>
                                    <br />
                                    <span class="text-muted"><small>On Display</small></span>&nbsp;<span th:text="${slider.active == 'T'}? 'Yes' : 'No'" class="text-success">Yes</span>
                                    <br />
                                    <a role="button" class="btn btn-sm btn-success btn-icon" th:href="@{/slider/{id}/view.mk(id=${slider.id})}" data-toggle-light="lightbox" th:data-title="${slider.sliderName}" th:data-footer="${slider.description}" data-toggle="tooltip" data-placement="top" data-type="image" title="View Image"><i class="fa fa-image"></i></a>&nbsp;
                                    <!--/*<btn class="btn btn-sm btn-warning btn-icon" data-toggle="tooltip" data-placement="top" title="Edit Slider"><i class="fa fa-edit"></i></btn>*/-->&nbsp;
                                    <btn class="btn btn-sm btn-danger btn-icon" th:url="@{/slider/{id}/remove.mk(id=${slider.id})}" th:buttonId="${slider.id}" onclick="showSwalConfirmation(this)" data-toggle="tooltip" data-placement="top" title="Remove Slider"><i class="fa fa-times"></i></btn>
                                    <span class="text-danger hide" th:id="'RemovedMsg_' + ${slider.id}"><small>Removed</small></span>
                                </td>
                                <td th:text="${slider.description}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <form id="SliderForm" action="/add/slider.mk" th:action="@{/add/slider.mk}" th:object="${sliderForm}" method="post" enctype="multipart/form-data">
                        <div class="card-header">
                            <h4 class="card-title">
                                Slider Image Form
                            </h4>
                        </div>
                        <div class="card-content">
                            <div class="form-group">
                                <label class="control-label">
                                    Slider Image <star>*</star>
                                </label>
                                <input type="file" class="form-control" id="UploadImage" th:field="*{sliderImage}" required="true" aria-required="true">
                            </div>
                            <div class="form-group">
                                <label class="control-label">
                                    Description <star>*</star>
                                </label>
                                <textarea rows="3" columns="100" class="form-control" th:field="*{description}" required="true" aria-required="true"></textarea>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-6">
                                        <label class="control-label">
                                            Slide Name <star>*</star>
                                        </label>
                                        <input class="form-control" th:field="*{sliderName}" aria-required="true">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="control-label">&nbsp;</label>
                                        <div class="checkbox">
                                            <input type="checkbox" id="DisplayOnScreen" th:field="*{activeSlider}">
                                            <label for="DisplayOnScreen">
                                                Display On Screen?
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="category"><star>*</star> Required fields</div>
                        </div>
                        <div class="card-footer">
                            <div class="pull-right">
                                <button type="reset" id="ResetButton" class="btn btn-default btn-fill">Reset</button>&nbsp;
                                <button type="submit" name="SliderFormSubmit" class="btn btn-info btn-fill">Add Slider Image</button>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

</body>


<th:block layout:fragment="footerscript">
    <!-- Bootstrap Validator Plugin -->
    <script src="/resources/js/bootstrapValidator.min.js" th:src="@{/resources/js/bootstrapValidator.min.js}"></script>
    <!--  Checkbox, Radio & Switch Plugins -->
    <script src="/resources/js/bootstrap-checkbox-radio.js" th:src="@{/resources/js/bootstrap-checkbox-radio.js}"></script>
    <!--  Notifications Plugin    -->
    <script src="/resources/js/bootstrap-notify.js" th:src="@{/resources/js/bootstrap-notify.js}"></script>
    <!-- Perfect Scroll Bar Plugin -->
    <script src="/resources/js/perfect-scrollbar.min.js" th:src="@{/resources/js/perfect-scrollbar.min.js}"></script>
    <!-- Sweet Alert 2 plugin -->
    <script src="/resources/js/sweetalert2.min.js" th:src="@{/resources/js/sweetalert2.min.js}"></script>
    <!-- Promise Library for SweetAlert2 working on IE -->
    <script src="/resources/js/es6-promise-auto.min.js" th:src="@{/resources/js/es6-promise-auto.min.js}"></script>
    <!-- Bootstrap filestyle Plugin -->
    <script src="/resources/js/bootstrap-filestyle.min.js" th:src="@{/resources/js/bootstrap-filestyle.min.js}"></script>
    <!-- Bootstrap Lightbox Plugin -->
    <script src="/resources/js/ekko-lightbox.min.js" th:src="@{/resources/js/ekko-lightbox.min.js}"></script>

    <!-- Paper Dashboard javascript methods -->
    <script src="/resources/js/paper-dashboard.js" th:src="@{/resources/js/paper-dashboard.js}"></script>
    <!-- Validation Util JS -->
    <script src="/resources/js/validation-util.js" th:src="@{/resources/js/validation-util.js}"></script>

    <script src="/resources/js/usm.js" th:src="@{/resources/js/usm.js}"></script>

    <script type="text/javascript" th:inline="javascript">
      $(document).on('click', '[data-toggle-light="lightbox"]', function(event) {
                event.preventDefault();
                $(this).ekkoLightbox();
      });

      $(document).ready(function(){

            var sliderName = /*[[${sliderName}]]*/ '';
        	if(sliderName !== undefined && sliderName !== '' && sliderName !== null){
        	    $.notify({
                    icon: 'ti-map',
                    message: 'Slider Image <b>'+ sliderName +'</b> created Successfully.'
                    },{
                    type: 'success',
                    timer: 2000,
                    placement: {
                        from: 'top',
                        align: 'center'
                    }
                });
            }

      });

      function showSwalConfirmation(obj){
            var url = $(obj).attr('url');
            var removedMsg = '#RemovedMsg_'+$(obj).attr('buttonId');
            swal({
                    title: 'Are you sure?',
                    text: "You won't be able to undo this!",
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonClass: 'btn btn-danger btn-fill',
                    cancelButtonClass: 'btn btn-default btn-fill ml-2',
                    confirmButtonText: 'Yes, remove this slider!',
                    buttonsStyling: false,
                    allowOutsideClick: false,
                    allowEnterKey: false,
                    allowEscapeKey: false,
                    showLoaderOnConfirm: true,
                    preConfirm: function () {
                        return new Promise(function (resolve) {
                          $.post(url, USM.data_csrf)
                            .done(function (data) {
                                 swal({
                                    title: 'Deleted!',
                                    text: 'The slider has been removed.',
                                    type: 'success',
                                    confirmButtonClass: "btn btn-success btn-fill",
                                    buttonsStyling: false
                                 });
                                 $(obj).addClass('hide');
                                 $(removedMsg).removeClass('hide');
                            }).fail(function() {
                                  swal({
                                    title: 'Warning!',
                                    text: 'There is some error.',
                                    type: 'warning',
                                    confirmButtonClass: "btn btn-warning btn-fill",
                                    buttonsStyling: false
                                 });
                           });
                        });
                    }
                });
      }
    </script>

</th:block>

</html>
