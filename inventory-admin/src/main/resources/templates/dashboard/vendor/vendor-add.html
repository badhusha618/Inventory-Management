<!DOCTYPE html>
<!--/*
  ~
  ~    Copyright (c) 2017 Makinus Pvt Ltd - All Rights Reserved
  ~
  ~    Unauthorized copying of this file, via any medium is strictly prohibited
  ~    Proprietary and confidential
  ~    Written by Makinus Pvt Ltd
  ~
  */-->
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{dashboard/dashboard-layout}" th:with="vendorModule='active'">

<head>
    <title>Add Product</title>
    <!-- GLOBAL MAINLY STYLES-->
    <link href="/resources/css/bootstrap.min.css" th:href="@{/resources/css/bootstrap.min.css}" rel="stylesheet" media="screen" />
    <link href="/resources/css/font-awesome.min.css" th:href="@{/resources/css/font-awesome.min.css}" rel="stylesheet" media="screen" />
    <link href="/resources/css/themify-icons.css" th:href="@{/resources/css/themify-icons.css}" rel="stylesheet" media="screen" />
    <!-- THEME STYLES-->
    <link href="/resources/css/main.css" th:href="@{/resources/css/main.css}" rel="stylesheet" />
    <!-- PAGE LEVEL STYLES-->
</head>

<body>

<th:block layout:fragment="header">
    <div th:replace="~{dashboard/header :: header}"></div>
</th:block>

<th:block layout:fragment="sidebar">
    <div th:replace="~{dashboard/sidebar :: sidebar}"></div>
</th:block>

<th:block layout:fragment="content">
    <!-- START PAGE CONTENT-->
    <div class="page-heading">
        <h1 class="page-title">Vendor Form</h1>
    </div>
    <div class="page-content fade-in-up">
        <div class="row">
            <div class="col-md-12">
                <div class="ibox">
                    <div class="ibox-head">
                        <div class="ibox-title">Add Vendor Form</div>
                        <div class="ibox-tools">
                            <a class="ibox-collapse"><i class="fa fa-minus"></i></a>
                        </div>
                    </div>
                    <div class="ibox-body">
                        <form id="VendorForm" action="/save/vendor.mk" th:action="@{/save/vendor.mk}" th:object="${vendorForm}" method="post" enctype="multipart/form-data">
                            <div class="ibox" style="background-color: rgb(226, 242, 247)">
                                <div class="ibox-head">
                                    <div class="ibox-title">Vendor Details</div>
                                    <div class="ibox-tools">
                                        <a class="ibox-collapse"><i class="fa fa-minus"></i></a>
                                    </div>
                                </div>
                                <div class="ibox-body">
                                    <div class="row" id="vendorFeatureBox">
                                        <div class="col-sm-3 form-group">
                                            <label>Vendor Code</label>&nbsp;&nbsp;<span class="text-danger">*</span>
                                            <input class="form-control" type="text" id="vendorCode" th:field="*{vendorCode}">
                                        </div>
                                        <div class="col-sm-3 form-group">
                                            <label>Vendor Name</label>&nbsp;&nbsp;<span class="text-danger">*</span>
                                            <input class="form-control" type="text" id="vendorName" th:field="*{vendorName}">
                                        </div>
                                        <div class="col-sm-3 form-group">
                                            <label>Proprietor Name</label>&nbsp;&nbsp;<span class="text-danger">*</span>
                                            <input class="form-control" type="text" id="companyName" th:field="*{companyName}">
                                        </div>
                                        <div class="col-sm-3 form-group">
                                            <label>Mobile No</label>&nbsp;&nbsp;<span class="text-danger">*</span>
                                            <input class="form-control" type="text" id="mobileNo" th:field="*{mobileNo}">
                                        </div>
                                        <div class="col-sm-3 form-group">
                                            <label>Email</label>
                                            <input class="form-control" type="text" id="email" th:field="*{email}">
                                        </div>
                                        <div class="col-sm-3 form-group">
                                            <label>GST No</label>
                                            <input class="form-control" type="text" id="gstNo" th:field="*{gstNo}">
                                        </div>
                                        <div class="col-sm-3 form-group">
                                            <label>PAN No</label>
                                            <input class="form-control" type="text" id="panNo" th:field="*{panNo}">
                                        </div>
                                        <div class="col-sm-3 form-group">
                                            <label>A/C Holder Name</label>
                                            <input class="form-control" type="text" id="acHolderName" th:field="*{acHolderName}">
                                        </div>
                                        <div class="col-sm-3 form-group">
                                            <label>Bank A/c No</label>
                                            <input class="form-control" type="text" id="bankAcNo" th:field="*{bankAcNo}">
                                        </div>
                                        <div class="col-sm-3 form-group">
                                            <label>IFS Code</label>
                                            <input class="form-control" type="text" id="ifscCode" th:field="*{ifscCode}">
                                        </div>
                                        <div class="col-sm-3 form-group">
                                            <label>Telephone</label>
                                            <input class="form-control" type="text" id="telephone" th:field="*{telephone}">
                                        </div>
                                        <div class="col-sm-3 form-group">
                                            <label>City</label>
                                            <input class="form-control" type="text" id="city" th:field="*{city}">
                                        </div>
                                        <div class="col-sm-3 form-group">
                                            <label>Pin Code</label>&nbsp;&nbsp;<span class="text-danger">*</span>
                                            <input class="form-control" type="text" id="pinCode" th:field="*{pinCode}">
                                        </div>
                                        <div class="col-sm-3 form-group">
                                            <label>Address</label>
                                            <textarea class="form-control" rows="3" th:field="*{address}" aria-required="true" maxlength="300"></textarea>
                                        </div>
                                        <div class="col-sm-6 form-group">
                                            <label>Vendor Signature</label>&nbsp;&nbsp;<span class="text-danger">*</span>
                                            <input class="form-control" type="file" th:field="*{vendorSignature}">
                                        </div>
                                        <div class="col-sm-6 form-group">
                                            <label>&nbsp;</label></br>
                                            <label class="ui-checkbox">
                                                <input type="checkbox" th:field="*{active}">
                                                <span class="input-span"></span>Active Vendor</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <span class="text-danger">*</span>&nbsp;&nbsp;Required fields</span>
                            <div class="form-group text-right">
                                <a class="btn btn-warning" href="/list/vendor.mk" th:href="@{/list/vendor.mk}">
                                    <i class="fa fa-arrow-left"></i> &nbsp; Back
                                </a>
                                <button class="btn btn-danger" type="reset">Reset</button>
                                <button class="btn btn-success" type="submit">Add Vendor</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- END PAGE CONTENT-->
</th:block>

<th:block layout:fragment="pageplugin">
    <!-- PAGE LEVEL PLUGINS-->
    <script src="/resources/js/bootstrap-filestyle.js" th:src="@{/resources/js/bootstrap-filestyle.js}" type="text/javascript"></script>
    <script src="/resources/js/jquery.validate.min.js" th:src="@{/resources/js/jquery.validate.min.js}" type="text/javascript"></script>
    <script src="/resources/js/additional-methods.min.js" th:src="@{/resources/js/additional-methods.min.js}" type="text/javascript"></script>
    <script type="text/javascript">
            $.validator.addMethod('filesize', function (value, element, param) {
                return (this.optional(element)) || (element.files[0].size <= param)
            });
    </script>
</th:block>

<th:block layout:fragment="pagescript">
    <!-- PAGE LEVEL SCRIPTS-->
    <script type="text/javascript" th:inline="javascript">
        $('[rel="tooltip"]').tooltip({
                trigger: 'hover'
            });

            $(document).ready(function () {
                $('[rel="tooltip"]').tooltip({
                    trigger: 'hover'
                });

                //File Upload Style
                $(":file").filestyle();

            $("#vendorName").change(function(){
                $("#id").empty();
                $("#id").append($('<option></option>').val("").html("Select"));
                 var selectedId = $(this).val();
                 vendor.forEach(v => {
                        $("#id").append($('<option></option>').val(v.a).html(v.b));
                 });
            });

                var csrfParameter = $("meta[name='_csrf_parameter']").attr("content");
                var csrfToken = $("meta[name='_csrf']").attr("content");

               //JQuery Validator
               $('#VendorForm').validate({
                    rules: {
                        vendorCode: {
                            required: true,
                            remote: {
                                url: US.baseURL+'/vendor/available.mk',
                                type: "post",
                                data: US.data_csrf
                            }
                        },
                        vendorName: {
                            required: true,
                        },
                        companyName: {
                            required: true,
                            maxlength:30
                        },
                        mobileNo:{
                             required:true,
                             minlength:10,
                             maxlength:10,
                             number:true
                        },
                         email:{
                             maxlength:50,
                             email:true
                        },
                        gstNo:
                        {
                             required:false,
                             maxlength:15,
                             minlength:15
                        },
                        panNo:
                        {
                             minlength:10,
                             maxlength:10
                        },
                        bankAcNo:
                        {
                             required:false,
                             minlength:8,
                             maxlength:18,
                             number:true
                        },
                        acHolderName: {
                            required:false,
                            maxlength:30
                        },
                        ifscCode:
                        {
                            required:false,
                             maxlength:11,
                             minlength:11
                        },
                        telephone:{
                             minlength:8,
                             maxlength:15,
                              number:true
                        },
                        address:{
                             maxlength:300
                        },
                        city:{
                             maxlength:300
                        },
                        pinCode:{
                             required:true,
                             minlength:6,
                             maxlength:6,
                             number:true
                        },
                       vendorSignature: {
                            required: true,
                            filesize: "2097152",
                            accept: "image/jpg,image/jpeg,image/png,image/gif"
                        },
                       },
                    messages: {
                        vendorCode: {
                            required: "Please enter vendor code",
                            remote:"Vendor code already exist"
                        },
                        vendorName: {
                            required: "Please enter vendor name",
                            maxlength:"Please enter vendor name"
                        },
                        companyName: {
                            required: "Please enter proprietor name",
                            maxlength:"Please enter name"
                        },
                        mobileNo: {
                            required: "Please enter mobile number",
                            minlength:"Please enter 10 digit mobile number",
                            maxlength:"Please enter valid mobile number"
                        },
                        email:{
                             maxlength:"Please provide within 50 characters",
                             email:"Please enter valid e-mail id"
                        },
                        gstNo:{
                             required: "Please enter GST number",
                             maxlength:"Please enter valid GST number",
                             minlength:"Please enter valid GST number"
                        },
                        panNo:{
                             maxlength:"Please enter valid PAN number",
                             minlength:"Please enter valid PAN number"
                        },
                         bankAcNo:{
                             required: "Please enter bank a/c number",
                             maxlength:"Please enter valid bank a/c number",
                             minlength:"Please enter valid bank a/c number",
                             number:"Please enter valid bank a/c number"
                        },
                        acHolderName: {
                            required: "Please enter a/c holder name",
                            maxlength:"Please enter 30-digit a/c holder name"
                        },
                         ifscCode:{
                             required: "Please enter IFS code",
                             maxlength:"Please enter valid IFS code",
                             minlength:"Please enter valid IFS code"
                        },
                        telephone:{
                             maxlength:"Please enter valid telephone number",
                             minlength:"Please enter valid telephone number"
                        },
                         address:{
                             maxlength:"Please enter with 300 characters"
                        },
                        city:{
                             maxlength:"Please enter with city"
                        },
                        pinCode:{
                             required: "Please enter pin code",
                             minlength:"Please enter valid pin code",
                             maxlength:"Please enter 6-digit pin code"
                        },
                        vendorSignature: {
                            required: "Vendor signature required",
                            accept: 'Please upload valid image.',
                            filesize: "File size exceeds maximum limit 2 MB"
                        }
                    },
                    errorClass: "help-block error",
                    highlight: function (e) {
                        $(e).closest("#customer-form .form-group").addClass("has-error")
                    },
                    unhighlight: function (e) {
                        $(e).closest("#customer-form .form-group").removeClass("has-error")
                    }
                }); // end of validator

            }) // end of ready function
            /*]]>*/
       </script>
</th:block>

</body>
</html>